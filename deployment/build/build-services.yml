---
- name: Build Docker Images
  hosts: localhost
  tasks:
    - name: Build Sequencer
      community.docker.docker_image:
        name: "{{ docker.registry }}/sequencer"
        tag: "{{ item }}"

        source: build

        build:
          path: ../../
          dockerfile: docker/Dockerfile.sequencer

          pull: yes

        push: "{{ docker.push }}"

      with_items: "{{ build.tags }}"

    - name: Build Checklist template
      community.docker.docker_image:
        name: "{{ docker.registry }}/checklist"
        tag: template

        source: build

        build:
          path:
            ../../checklist

          pull: yes

        push: "{{ docker.push }}"
